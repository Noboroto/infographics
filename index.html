<!DOCTYPE html>
<html lang="vi">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Khoa Công nghệ Thông tin - Trường ĐH KHTN | Infographics</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700;900&family=Poppins:wght@700;900&display=swap"
		rel="stylesheet">
	<script src="https://unpkg.com/lucide@latest"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
	<style>
		body {
			font-family: 'Be Vietnam Pro', sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: #1E293B;
			min-height: 100vh;
		}

		.main-container {
			background-color: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(10px);
			border-radius: 1rem;
			box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
		}

		.menu-item {
			background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
			border: 2px solid #e2e8f0;
			transition: all 0.3s ease;
			border-radius: 1rem;
			cursor: pointer;
		}

		.menu-item:hover {
			transform: translateY(-5px);
			border-color: #3b82f6;
			box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
		}

		.menu-item.active {
			border-color: #3b82f6;
			background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
		}

		.content-frame {
			border: none;
			border-radius: 1rem;
			box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
			background-color: white;
			overflow: hidden;
			position: relative;
		}

		.sidebar-container {
			min-height: 600px;
		}

		.header-section {
			background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
			color: white;
			text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
		}

		.download-buttons {
			position: fixed;
			top: 20px;
			right: 20px;
			z-index: 1000;
			display: flex;
			flex-direction: column;
			gap: 10px;
		}

		.download-btn {
			backdrop-filter: blur(10px);
			background: rgba(59, 130, 246, 0.9);
			border: 1px solid rgba(255, 255, 255, 0.2);
		}

		.download-btn:hover {
			background: rgba(37, 99, 235, 0.95);
			transform: translateY(-2px);
		}

		.progress-container {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 2000;
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(10px);
			padding: 2rem;
			border-radius: 1rem;
			box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);
			display: none;
		}

		.menu-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
			gap: 1rem;
		}

		@media (max-width: 1024px) {
			.download-buttons {
				top: 10px;
				right: 10px;
				gap: 8px;
			}

			.download-btn {
				padding: 0.5rem 0.75rem;
				font-size: 0.875rem;
			}

			.download-btn span {
				display: none;
			}
		}

		@media (max-width: 768px) {
			.menu-grid {
				grid-template-columns: 1fr;
			}

			body {
				padding: 0.5rem;
			}

			.container {
				padding: 0.5rem !important;
			}

			.header-section {
				padding: 2rem 1rem !important;
				margin-bottom: 1rem !important;
			}

			.header-section h1 {
				font-size: 2rem !important;
			}

			.header-section p {
				font-size: 1rem !important;
			}

			.main-container {
				padding: 1rem !important;
			}

			.menu-item {
				padding: 0.75rem !important;
			}

			.menu-item .icon {
				width: 1.5rem !important;
				height: 1.5rem !important;
			}

			.menu-item h3 {
				font-size: 0.75rem !important;
			}

			.menu-item p {
				font-size: 0.625rem !important;
			}

			.download-buttons {
				position: relative;
				top: auto;
				right: auto;
				display: flex;
				flex-direction: row;
				justify-content: center;
				margin-bottom: 1rem;
				gap: 0.5rem;
			}

			.download-btn {
				padding: 0.5rem;
				border-radius: 0.5rem;
			}

			.content-frame {
				height: 500px !important;
				min-height: 400px !important;
			}

			.sidebar-container {
				min-height: auto !important;
			}
		}

		@media (max-width: 480px) {
			.header-section h1 {
				font-size: 1.5rem !important;
				line-height: 1.3 !important;
			}

			.header-section p {
				font-size: 0.875rem !important;
			}

			.menu-item {
				padding: 0.5rem !important;
			}

			.content-frame {
				height: 600px !important;
				min-height: 500px;
				max-width: 100%;
			}

			.download-buttons {
				flex-direction: column;
				align-items: center;
			}
		}

		@media (max-width: 480px) {
			.content-frame {
				height: 500px !important;
				min-height: 400px;
			}

			.main-container {
				padding: 0.5rem !important;
				margin: 0.25rem !important;
			}

			.header-section h1 {
				font-size: 1.25rem !important;
			}

			.download-buttons {
				top: 5px;
				right: 5px;
				gap: 4px;
			}
		}

		@media (max-width: 320px) {
			.content-frame {
				height: 400px !important;
				min-height: 350px;
			}
		}

		.icon-color-ai {
			color: #4f46e5;
		}

		.icon-color-cs {
			color: #111B88;
		}

		.icon-color-cv {
			color: #65a30d;
		}

		.icon-color-ds {
			color: #e11d48;
		}

		.icon-color-is {
			color: #0891b2;
		}

		.icon-color-ke {
			color: #d97706;
		}

		.icon-color-cn {
			color: #ea580c;
		}

		.icon-color-se {
			color: #2563eb;
		}

		.icon-color-faculty {
			color: #7c3aed;
		}
	</style>
</head>

<body class="antialiased">
	<div class="download-buttons">
		<button id="download-current"
			class="download-btn text-white font-bold py-3 px-4 rounded-full shadow-lg flex items-center gap-2 transition-all duration-300">
			<i data-lucide="download" class="w-5 h-5"></i>
			<span>Tải trang hiện tại</span>
		</button>
		<button id="download-all"
			class="download-btn text-white font-bold py-3 px-4 rounded-full shadow-lg flex items-center gap-2 transition-all duration-300">
			<i data-lucide="download-cloud" class="w-5 h-5"></i>
			<span>Tải tất cả PNG</span>
		</button>
	</div>

	<div id="progress-modal" class="progress-container">
		<div class="text-center">
			<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
			<h3 class="text-lg font-semibold mb-2">Đang tạo file PNG...</h3>
			<p id="progress-text" class="text-gray-600 mb-4">Chuẩn bị tải...</p>
			<div class="w-full bg-gray-200 rounded-full h-2">
				<div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
			</div>
		</div>
	</div>

	<div class="container mx-auto p-2 md:p-4 lg:p-8">
		<div class="md:hidden mb-4">
			<div class="download-buttons relative top-0 right-0 flex-row justify-center">
				<button id="download-current-mobile"
					class="download-btn text-white font-bold py-3 px-4 rounded-full shadow-lg flex items-center gap-2 transition-all duration-300">
					<i data-lucide="download" class="w-5 h-5"></i>
					<span class="hidden sm:inline">Tải trang hiện tại</span>
				</button>
				<button id="download-all-mobile"
					class="download-btn text-white font-bold py-3 px-4 rounded-full shadow-lg flex items-center gap-2 transition-all duration-300">
					<i data-lucide="download-cloud" class="w-5 h-5"></i>
					<span class="hidden sm:inline">Tải tất cả PNG</span>
				</button>
			</div>
		</div>

		<div class="header-section text-center py-6 md:py-12 px-4 md:px-6 rounded-xl mb-4 md:mb-8">
			<h1 class="text-2xl md:text-4xl lg:text-6xl font-black leading-tight mb-2 md:mb-4">
				KHOA CÔNG NGHỆ THÔNG TIN
			</h1>
			<p class="text-lg md:text-xl lg:text-2xl font-bold text-blue-200 mb-2 md:mb-4">
				Trường Đại học Khoa học tự nhiên – ĐHQG-HCM
			</p>
			<p class="text-sm md:text-lg text-blue-100 italic">
				"Tiên phong tri thức, kiến tạo tương lai"
			</p>
		</div>

		<div class="grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-1 gap-4 md:gap-8">
			<div class="lg:col-span-1 md:col-span-1 order-2 md:order-1">
				<div id="sidebar-container" class="main-container sidebar-container p-4 md:p-6 lg:sticky lg:top-4">
					<h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4 md:mb-6 text-center">
						<i data-lucide="navigation" class="inline w-5 h-5 md:w-6 md:h-6 mr-2"></i>
						<span class="hidden sm:inline">Danh sách chuyên ngành</span>
						<span class="sm:hidden">Menu</span>
					</h2>
					<div class="space-y-3">
						<div class="menu-item p-4 text-center" onclick="loadContent('faculty.html', this)">
							<i data-lucide="graduation-cap" class="w-8 h-8 mx-auto mb-2 icon-color-faculty"></i>
							<h3 class="font-bold text-sm">Thông tin chung</h3>
							<p class="text-xs text-gray-600">Khoa CNTT</p>
						</div>

						<div class="menu-item p-4 text-center" onclick="loadContent('pages/computer_science.html', this)">
							<i data-lucide="cpu" class="w-8 h-8 mx-auto mb-2 icon-color-cs"></i>
							<h3 class="font-bold text-sm">Khoa học Máy tính</h3>
							<p class="text-xs text-gray-600">KHMT - Computer Science</p>
						</div>
						<div class="menu-item p-4 text-center active"
							onclick="loadContent('pages/artificial_intelligence.html', this)">
							<i data-lucide="brain-circuit" class="w-8 h-8 mx-auto mb-2 icon-color-ai"></i>
							<h3 class="font-bold text-sm">Trí tuệ Nhân tạo</h3>
							<p class="text-xs text-gray-600">TTNT - Artificial Intelligence</p>
						</div>
						<div class="menu-item p-4 text-center" onclick="loadContent('pages/computer_vision.html', this)">
							<i data-lucide="camera" class="w-8 h-8 mx-auto mb-2 icon-color-cv"></i>
							<h3 class="font-bold text-sm">Thị giác Máy tính</h3>
							<p class="text-xs text-gray-600">TGMT - Computer Vision & Cognitive Cybernetics</p>
						</div>
						<div class="menu-item p-4 text-center" onclick="loadContent('pages/knowledge_engineer.html', this)">
							<i data-lucide="book-open" class="w-8 h-8 mx-auto mb-2 icon-color-ke"></i>
							<h3 class="font-bold text-sm">Công nghệ Tri thức</h3>
							<p class="text-xs text-gray-600">CNTThuc - Knowledge Engineering</p>
						</div>
						<div class="menu-item p-4 text-center" onclick="loadContent('pages/data_science.html', this)">
							<i data-lucide="bar-chart-3" class="w-8 h-8 mx-auto mb-2 icon-color-ds"></i>
							<h3 class="font-bold text-sm">Khoa học Dữ liệu</h3>
							<p class="text-xs text-gray-600">KHDL - Data Science</p>
						</div>
						<div class="menu-item p-4 text-center" onclick="loadContent('pages/software_engineer.html', this)">
							<i data-lucide="code" class="w-8 h-8 mx-auto mb-2 icon-color-se"></i>
							<h3 class="font-bold text-sm">Kỹ thuật Phần mềm</h3>
							<p class="text-xs text-gray-600">KTPM - Software Engineering</p>
						</div>
						<div class="menu-item p-4 text-center" onclick="loadContent('pages/computer_network.html', this)">
							<i data-lucide="network" class="w-8 h-8 mx-auto mb-2 icon-color-cn"></i>
							<h3 class="font-bold text-sm">Mạng máy tính & Viễn thông</h3>
							<p class="text-xs text-gray-600">MMT - Computer Network & Telecommunications</p>
						</div>
						<div class="menu-item p-4 text-center" onclick="loadContent('pages/information_system.html', this)">
							<i data-lucide="database" class="w-8 h-8 mx-auto mb-2 icon-color-is"></i>
							<h3 class="font-bold text-sm">Hệ thống Thông tin</h3>
							<p class="text-xs text-gray-600">HTTT - Information System</p>
						</div>
					</div>
				</div>
			</div>

			<div class="lg:col-span-3 md:col-span-2 order-1 md:order-2">
				<div class="main-container p-2 md:p-4">
					<iframe id="content-frame" class="content-frame w-full" src="pages/artificial_intelligence.html"
						frameborder="0">
					</iframe>
				</div>
			</div>
		</div>
	</div>

	<script>
		lucide.createIcons();

		// Set initial page url and clicked menu item
		let currentMenuItem = document.querySelector('.menu-item.active');
		if (currentMenuItem) {
			currentMenuItem.classList.remove('active');
		}
		// Default page URL
		let currentPageUrl = 'pages/computer_science.html';
		
		// Function to sync iframe height with sidebar
		function syncIframeHeight() {
			const sidebar = document.getElementById('sidebar-container');
			const iframe = document.getElementById('content-frame');

			if (sidebar && iframe) {
				// Check if we're on mobile
				const isMobile = window.innerWidth <= 768;

				if (isMobile) {
					// On mobile, use fixed height for better UX
					iframe.style.height = '500px';
				} else {
					// On desktop/tablet, sync with sidebar height
					const sidebarHeight = sidebar.offsetHeight;
					// Set iframe height to match sidebar (minus some padding for container)
					iframe.style.height = `${sidebarHeight - 16}px`; // 16px for container padding
				}
			}
		}

		// Sync height on window resize
		window.addEventListener('resize', syncIframeHeight);

		// Sync height after content loads
		window.addEventListener('load', function () {
			setTimeout(syncIframeHeight, 100); // Small delay to ensure everything is rendered
		});

		// Observer to watch for sidebar height changes
		if (window.ResizeObserver) {
			const resizeObserver = new ResizeObserver(entries => {
				syncIframeHeight();
			});

			const sidebar = document.getElementById('sidebar-container');
			if (sidebar) {
				resizeObserver.observe(sidebar);
			}
		}

		// Page configurations
		const pageConfigs = {
			'faculty.html': {
				background: '#F8FAFC',
				filename: 'thongtin-chung-fit-hcmus.png'
			},
			'pages/artificial_intelligence.html': {
				background: '#EEF2FF',
				filename: 'infographic-ai-hcmus.png'
			},
			'pages/computer_science.html': {
				background: '#F8FAFC',
				filename: 'infographic-khmt-hcmus.png'
			},
			'pages/computer_vision.html': {
				background: '#F7FEE7',
				filename: 'infographic-thigiacmaytinh-hcmus.png'
			},
			'pages/data_science.html': {
				background: '#FFF1F2',
				filename: 'infographic-khdl-hcmus.png'
			},
			'pages/information_system.html': {
				background: '#ECFEFF',
				filename: 'infographic-httt-hcmus.png'
			},
			'pages/knowledge_engineer.html': {
				background: '#FFFBEB',
				filename: 'infographic-cntt-hcmus.png'
			},
			'pages/computer_network.html': {
				background: '#FFF7ED',
				filename: 'infographic-mmt-hcmus.png'
			},
			'pages/software_engineer.html': {
				background: '#EFF6FF',
				filename: 'infographic-ktpm-hcmus.png'
			}
		};

		// Load content function
		function loadContent(url, element) {
			currentPageUrl = url;
			const iframe = document.getElementById('content-frame');
			iframe.src = url;

			// Update active menu item
			document.querySelectorAll('.menu-item').forEach(item => {
				item.classList.remove('active');
			});
			element.classList.add('active');

			// Sync height after content loads
			iframe.onload = function () {
				setTimeout(syncIframeHeight, 200); // Allow time for content to render
			};
		}

		// Initialize height sync on page load
		document.addEventListener('DOMContentLoaded', function () {
			setTimeout(syncIframeHeight, 300);
		});

		// Download current page
		document.getElementById('download-current').addEventListener('click', function () {
			const iframe = document.getElementById('content-frame');
			const config = pageConfigs[currentPageUrl];

			if (!config) {
				alert('Không thể tải trang này');
				return;
			}

			// Show progress
			showProgress('Đang tạo file PNG cho trang hiện tại...', 50);

			// Wait for iframe to load
			iframe.onload = function () {
				try {
					const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
					const content = iframeDoc.getElementById('infographic-content');

					if (!content) {
						alert('Không tìm thấy nội dung để tải');
						hideProgress();
						return;
					}

					// Hide export button in iframe if exists
					const exportBtn = iframeDoc.getElementById('export-btn');
					if (exportBtn) exportBtn.style.display = 'none';

					html2canvas(content, {
						backgroundColor: config.background,
						useCORS: true,
						scale: 2,
						scrollX: 0,
						scrollY: 0
					}).then(canvas => {
						const image = canvas.toDataURL('image/png', 1.0);
						const link = document.createElement('a');
						link.download = config.filename;
						link.href = image;
						link.click();

						// Show export button again
						if (exportBtn) exportBtn.style.display = 'block';
						hideProgress();
					}).catch(err => {
						console.error('Lỗi khi tạo PNG:', err);
						alert('Có lỗi xảy ra khi tạo file PNG');
						if (exportBtn) exportBtn.style.display = 'block';
						hideProgress();
					});
				} catch (err) {
					console.error('Lỗi truy cập iframe:', err);
					alert('Không thể truy cập nội dung trang. Vui lòng thử lại.');
					hideProgress();
				}
			};
		});

		// Download all pages
		document.getElementById('download-all').addEventListener('click', async function () {
			const zip = new JSZip();
			const totalPages = Object.keys(pageConfigs).length;
			let completedPages = 0;

			showProgress('Bắt đầu tạo tất cả file PNG...', 0);

			try {
				for (const [url, config] of Object.entries(pageConfigs)) {
					updateProgress(`Đang xử lý: ${config.filename}`, (completedPages / totalPages) * 100);

					const canvas = await capturePageAsCanvas(url, config);
					const imageData = canvas.toDataURL('image/png', 1.0);
					const base64Data = imageData.split(',')[1];

					zip.file(config.filename, base64Data, { base64: true });
					completedPages++;
				}

				updateProgress('Đang nén và chuẩn bị tải xuống...', 95);

				const content = await zip.generateAsync({ type: 'blob' });
				saveAs(content, 'fit-hcmus-infographics-all.zip');

				updateProgress('Hoàn tất!', 100);
				setTimeout(hideProgress, 1000);

			} catch (error) {
				console.error('Lỗi khi tạo file ZIP:', error);
				alert('Có lỗi xảy ra khi tạo file ZIP');
				hideProgress();
			}
		});

		// Capture page as canvas
		async function capturePageAsCanvas(url, config) {
			return new Promise((resolve, reject) => {
				const tempFrame = document.createElement('iframe');
				tempFrame.style.position = 'absolute';
				tempFrame.style.left = '-9999px';
				tempFrame.style.width = '1200px';
				tempFrame.style.height = '800px';
				tempFrame.src = url;

				document.body.appendChild(tempFrame);

				tempFrame.onload = function () {
					try {
						const iframeDoc = tempFrame.contentDocument || tempFrame.contentWindow.document;
						const content = iframeDoc.getElementById('infographic-content');

						if (!content) {
							reject(new Error('Không tìm thấy nội dung'));
							return;
						}

						// Hide export button
						const exportBtn = iframeDoc.getElementById('export-btn');
						if (exportBtn) exportBtn.style.display = 'none';

						html2canvas(content, {
							backgroundColor: config.background,
							useCORS: true,
							scale: 2,
							scrollX: 0,
							scrollY: 0
						}).then(canvas => {
							document.body.removeChild(tempFrame);
							resolve(canvas);
						}).catch(reject);

					} catch (err) {
						document.body.removeChild(tempFrame);
						reject(err);
					}
				};

				tempFrame.onerror = function () {
					document.body.removeChild(tempFrame);
					reject(new Error('Không thể tải trang'));
				};
			});
		}

		// Progress functions
		function showProgress(text, progress) {
			document.getElementById('progress-modal').style.display = 'block';
			updateProgress(text, progress);
		}

		function updateProgress(text, progress) {
			document.getElementById('progress-text').textContent = text;
			document.getElementById('progress-bar').style.width = progress + '%';
		}

		function hideProgress() {
			document.getElementById('progress-modal').style.display = 'none';
		}

		// Handle iframe load errors
		document.getElementById('content-frame').onerror = function () {
			alert('Không thể tải trang. Vui lòng kiểm tra đường dẫn file.');
		};

		
	</script>
</body>

</html>